Index: app/src/main/java/com/example/killdll/db.java
===================================================================
--- app/src/main/java/com/example/killdll/db.java	(revision f8f47f5a668d0d02ecc346f4f9b81e5ece7b5c78)
+++ app/src/main/java/com/example/killdll/db.java	(revision f8f47f5a668d0d02ecc346f4f9b81e5ece7b5c78)
@@ -1,4 +0,0 @@
-package com.example.killdll;
-
-public class db {
-}
Index: app/src/main/res/layout/activity_new_task.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:orientation=\"vertical\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".NewTaskActivity\">\r\n\r\n    <com.google.android.material.appbar.AppBarLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <androidx.appcompat.widget.Toolbar\r\n            android:id=\"@+id/toolbar\"\r\n            android:layout_width=\"5dp\"\r\n            android:layout_height=\"7dp\"\r\n            android:background=\"?attr/colorPrimary\"\r\n            android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\r\n            app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\" />\r\n    </com.google.android.material.appbar.AppBarLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/theme\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"center\"\r\n            android:text=\"新建任务\"\r\n            android:textSize=\"15sp\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/edit_theme\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"5\"\r\n            android:gravity=\"center\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/time\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"2\"\r\n            android:gravity=\"center\"\r\n            android:text=\"DDL:\"\r\n            android:textSize=\"15sp\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/add_date\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"5\"\r\n            android:gravity=\"center\"\r\n            android:text=\"设置日期\"\r\n            android:textSize=\"15sp\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/add_time\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"5\"\r\n            android:gravity=\"center\"\r\n            android:text=\"设置时间\"\r\n            android:textSize=\"15sp\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/subTask\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"center\"\r\n            android:text=\"子任务:\"\r\n            android:textSize=\"15sp\" />\r\n\r\n        <ScrollView\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"5\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:gravity=\"center\" >\r\n\r\n            <ListView\r\n                android:id=\"@+id/task_list\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:layout_weight=\"5\"\r\n                android:gravity=\"center\" />\r\n        </ScrollView>\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/note\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:gravity=\"center\"\r\n            android:hint=\"备注:(你可以在这里标注任务的具体内容或心情感受)\"/>\r\n\r\n        <Button\r\n            android:id=\"@+id/add_picture\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"/>\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/plan\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"3\"\r\n            android:gravity=\"center\"\r\n            android:text=\"计划进度分配:\"\r\n            android:textSize=\"15sp\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/edit_plan\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"center\" />\r\n\r\n        <TextView\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"center\"\r\n            android:text=\"%/天\"\r\n            android:textSize=\"15sp\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <Button\r\n            android:id=\"@+id/cancel_button\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"bottom|left\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"center\"\r\n            android:text=\"取消\"\r\n            android:textSize=\"15sp\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/confirm_button\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"bottom|right\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"center\"\r\n            android:text=\"确定\"\r\n            android:textSize=\"15sp\" />\r\n    </LinearLayout>\r\n\r\n</LinearLayout>\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_new_task.xml	(revision f8f47f5a668d0d02ecc346f4f9b81e5ece7b5c78)
+++ app/src/main/res/layout/activity_new_task.xml	(date 1609042030334)
@@ -13,11 +13,20 @@
 
         <androidx.appcompat.widget.Toolbar
             android:id="@+id/toolbar"
-            android:layout_width="5dp"
-            android:layout_height="7dp"
-            android:background="?attr/colorPrimary"
-            android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"
-            app:popupTheme="@style/ThemeOverlay.AppCompat.Light" />
+            android:layout_width="0dp"
+            android:layout_height="?attr/actionBarSize"
+            android:background="#FFFF"
+            android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">
+
+            <TextView
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center"
+                android:gravity="center"
+                android:text="新建任务"
+                android:textSize="20sp" />
+        </androidx.appcompat.widget.Toolbar>
+
     </com.google.android.material.appbar.AppBarLayout>
 
     <LinearLayout
@@ -26,14 +35,13 @@
         android:orientation="horizontal">
 
         <TextView
-            android:id="@+id/theme"
+            android:id="@+id/name"
             android:layout_width="0dp"
             android:layout_height="wrap_content"
-            android:layout_gravity="center_vertical"
             android:layout_weight="1"
+            android:layout_gravity="center_vertical"
             android:gravity="center"
-            android:text="新建任务"
-            android:textSize="15sp" />
+            android:text="任务主题" />
 
         <EditText
             android:id="@+id/edit_theme"
@@ -95,21 +103,32 @@
             android:text="子任务:"
             android:textSize="15sp" />
 
-        <ScrollView
+
+        <androidx.recyclerview.widget.RecyclerView
+            android:id="@+id/recycler_view"
             android:layout_width="0dp"
-            android:layout_height="wrap_content"
+            android:layout_height="match_parent"
             android:layout_weight="5"
             android:layout_gravity="center_vertical"
-            android:gravity="center" >
+            android:gravity="center"
+            app:layout_behavior="@string/appbar_scrolling_view_behavior" >
 
-            <ListView
-                android:id="@+id/task_list"
-                android:layout_width="0dp"
+            <Button
+                android:id="@+id/circleButton"
+                android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
+                android:src="@drawable/add"
                 android:layout_gravity="center_vertical"
-                android:layout_weight="5"
+                android:gravity="center" />
+
+            <EditText
+                android:id="@+id/everyTask"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center_vertical"
                 android:gravity="center" />
-        </ScrollView>
+        </androidx.recyclerview.widget.RecyclerView>
+
 
     </LinearLayout>
 
@@ -129,7 +148,10 @@
         <Button
             android:id="@+id/add_picture"
             android:layout_width="wrap_content"
-            android:layout_height="wrap_content"/>
+            android:layout_height="wrap_content"
+            android:layout_gravity="bottom|right"
+            android:gravity="center"
+            android:text="添加图片"/>
 
     </LinearLayout>
 
@@ -140,27 +162,25 @@
 
         <TextView
             android:id="@+id/plan"
-            android:layout_width="0dp"
+            android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="center_vertical"
-            android:layout_weight="3"
             android:gravity="center"
             android:text="计划进度分配:"
             android:textSize="15sp" />
 
-        <EditText
+        <Button
             android:id="@+id/edit_plan"
-            android:layout_width="0dp"
+            android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="center_vertical"
-            android:layout_weight="1"
-            android:gravity="center" />
+            android:gravity="center"
+            android:text="进度设置"/>
 
         <TextView
-            android:layout_width="0dp"
+            android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="center_vertical"
-            android:layout_weight="1"
             android:gravity="center"
             android:text="%/天"
             android:textSize="15sp" />
@@ -168,7 +188,7 @@
 
     <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="wrap_content"
+        android:layout_height="match_parent"
         android:orientation="horizontal">
 
         <Button
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.example.killdll\">\r\n\r\n    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\r\n\r\n    <uses-feature android:name=\"android.hardware.type.watch\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\">\r\n        <uses-library\r\n            android:name=\"com.google.android.wearable\"\r\n            android:required=\"true\" />\r\n\r\n        <!--\r\n               Set to true if your app is Standalone, that is, it does not require the handheld\r\n               app to run.\r\n        -->\r\n        <meta-data\r\n            android:name=\"com.google.android.wearable.standalone\"\r\n            android:value=\"true\" />\r\n\r\n        <activity\r\n            android:name=\".TaskDetailsActivity\"\r\n            android:label=\"@string/title_activity_task_details\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\".DraftsActivity\" />\r\n        <activity android:name=\".SetReminderActivity\" />\r\n        <activity android:name=\".NewTaskActivity\" />\r\n        <activity android:name=\".MainActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision f8f47f5a668d0d02ecc346f4f9b81e5ece7b5c78)
+++ app/src/main/AndroidManifest.xml	(date 1609042359670)
@@ -2,9 +2,7 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.example.killdll">
 
-    <uses-permission android:name="android.permission.WAKE_LOCK" />
-
-    <uses-feature android:name="android.hardware.type.watch" />
+    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
 
     <application
         android:allowBackup="true"
@@ -13,27 +11,7 @@
         android:roundIcon="@mipmap/ic_launcher_round"
         android:supportsRtl="true"
         android:theme="@style/AppTheme">
-        <uses-library
-            android:name="com.google.android.wearable"
-            android:required="true" />
-
-        <!--
-               Set to true if your app is Standalone, that is, it does not require the handheld
-               app to run.
-        -->
-        <meta-data
-            android:name="com.google.android.wearable.standalone"
-            android:value="true" />
-
-        <activity
-            android:name=".TaskDetailsActivity"
-            android:label="@string/title_activity_task_details">
-            <intent-filter>
-                <action android:name="android.intent.action.MAIN" />
-
-                <category android:name="android.intent.category.LAUNCHER" />
-            </intent-filter>
-        </activity>
+        <activity android:name=".PlanProgressActivity"></activity>
         <activity android:name=".DraftsActivity" />
         <activity android:name=".SetReminderActivity" />
         <activity android:name=".NewTaskActivity" />
@@ -44,6 +22,16 @@
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>
+
+        <provider
+            android:name="androidx.core.content.FileProvider"
+            android:authorities="com.example.cameraalbumtest.fileprovider"
+            android:exported="false"
+            android:grantUriPermissions="true">
+            <meta-data
+                android:name="android.support.FILE_PROVIDER_PATHS"
+                android:resource="@xml/file_paths" />
+        </provider>
     </application>
 
 </manifest>
\ No newline at end of file
Index: app/src/main/res/menu/toolbar.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<menu xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\">\r\n    <item\r\n        android:id=\"@+id/set\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:orderInCategory=\"90\"\r\n        android:title=\"提醒设置\"\r\n        app:showAsAction=\"ifRoom\" />\r\n\r\n</menu>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/menu/toolbar.xml	(revision f8f47f5a668d0d02ecc346f4f9b81e5ece7b5c78)
+++ app/src/main/res/menu/toolbar.xml	(date 1609042030363)
@@ -1,11 +1,13 @@
 <?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:android="http://schemas.android.com/apk/res/android">
+
     <item
         android:id="@+id/set"
-        android:icon="@mipmap/ic_launcher"
+        android:icon="@drawable/set"
         android:orderInCategory="90"
         android:title="提醒设置"
-        app:showAsAction="ifRoom" />
+        app:showAsAction="always" />
+
 
 </menu>
\ No newline at end of file
Index: app/src/main/res/layout/activity_plan_progress.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_plan_progress.xml	(date 1609042030362)
+++ app/src/main/res/layout/activity_plan_progress.xml	(date 1609042030362)
@@ -0,0 +1,9 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".PlanProgressActivity">
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/xml/file_paths.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/xml/file_paths.xml	(date 1609042030363)
+++ app/src/main/res/xml/file_paths.xml	(date 1609042030363)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<paths xmlns:android="http://schemas.android.com/apk/res/android">
+    <external-path
+        name="my_images"
+        path="/" />
+</paths>
\ No newline at end of file
Index: app/src/main/java/com/example/killdll/PlanProgressActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/killdll/PlanProgressActivity.java	(date 1609042030332)
+++ app/src/main/java/com/example/killdll/PlanProgressActivity.java	(date 1609042030332)
@@ -0,0 +1,14 @@
+package com.example.killdll;
+
+import androidx.appcompat.app.AppCompatActivity;
+
+import android.os.Bundle;
+
+public class PlanProgressActivity extends AppCompatActivity {
+
+    @Override
+    protected void onCreate(Bundle savedInstanceState) {
+        super.onCreate(savedInstanceState);
+        setContentView(R.layout.activity_plan_progress);
+    }
+}
\ No newline at end of file
Index: app/src/main/java/com/example/killdll/NewTaskActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.killdll;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.app.TimePickerDialog;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.DatePicker;\r\nimport android.widget.ListView;\r\nimport android.widget.TimePicker;\r\n\r\nimport com.example.killdll.subTask.SubTask;\r\nimport com.example.killdll.subTask.TaskAdapter;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\n\r\npublic class NewTaskActivity extends AppCompatActivity {\r\n\r\n    private List<SubTask> subTaskList = new ArrayList<>();\r\n\r\n    private Button addDate;\r\n    private Button addTime;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_new_task);\r\n        init();\r\n        initTasks();\r\n        TaskAdapter adapter = new TaskAdapter(NewTaskActivity.this,R.layout.task_item,subTaskList);\r\n        ListView listView = (ListView) findViewById(R.id.task_list);\r\n//        listView.setOnClickListener(new AdapterView.OnItemClickListener() {\r\n//            @Override\r\n//            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n//                SubTask subTask = subTaskList.get(position);\r\n//            }\r\n//        });\r\n\r\n        addDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar mCalendar = Calendar.getInstance();\r\n                int year = mCalendar.get(Calendar.YEAR);\r\n                int month = mCalendar.get(Calendar.MONTH);\r\n                final int day = mCalendar.get(Calendar.DAY_OF_MONTH);\r\n\r\n                new DatePickerDialog(NewTaskActivity.this, new DatePickerDialog.OnDateSetListener() {\r\n                    @Override\r\n                    public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                        addDate.setText(year+\"年\"+month+\"月\"+dayOfMonth+\"日\");\r\n                    }\r\n                },year,month,day).show();\r\n            }\r\n        });\r\n        addTime.setOnClickListener(new View.OnClickListener() {\r\n            Calendar calendar = Calendar.getInstance();\r\n            @Override\r\n            public void onClick(View v) {\r\n                int hourOfDay = calendar.get(Calendar.HOUR_OF_DAY);\r\n                int minute = calendar.get(Calendar.MINUTE);\r\n                new TimePickerDialog(NewTaskActivity.this, new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                        addTime.setText(\"\"+hourOfDay+\":\"+minute);\r\n                    }\r\n                },hourOfDay,minute,true).show();\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    private void init(){\r\n        addDate = (Button) findViewById(R.id.add_date);\r\n        addTime = (Button) findViewById(R.id.add_time);\r\n\r\n\r\n    }\r\n\r\n    private void initTasks() {\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/killdll/NewTaskActivity.java	(revision f8f47f5a668d0d02ecc346f4f9b81e5ece7b5c78)
+++ app/src/main/java/com/example/killdll/NewTaskActivity.java	(date 1609042603820)
@@ -1,19 +1,40 @@
 package com.example.killdll;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
 import androidx.appcompat.app.AppCompatActivity;
 
+import android.app.ActionBar;
+import android.app.AlertDialog;
 import android.app.DatePickerDialog;
 import android.app.TimePickerDialog;
+import android.content.ContentResolver;
+import android.content.DialogInterface;
+import android.content.Intent;
+import android.graphics.Bitmap;
+import android.graphics.BitmapFactory;
+import android.graphics.Matrix;
+import android.net.Uri;
 import android.os.Bundle;
+import android.text.Editable;
+import android.text.Spannable;
+import android.text.SpannableString;
+import android.text.style.ImageSpan;
+import android.view.Menu;
+import android.view.MenuItem;
 import android.view.View;
 import android.widget.Button;
 import android.widget.DatePicker;
+import android.widget.EditText;
 import android.widget.ListView;
 import android.widget.TimePicker;
+import android.widget.Toast;
+import android.widget.Toolbar;
 
 import com.example.killdll.subTask.SubTask;
 import com.example.killdll.subTask.TaskAdapter;
 
+import java.io.FileNotFoundException;
 import java.util.ArrayList;
 import java.util.Calendar;
 import java.util.List;
@@ -24,6 +45,14 @@
 
     private Button addDate;
     private Button addTime;
+    private Button addPicture;
+    private Button planProgress;
+    private Button confirmButton;
+    private Button cancelButton;
+    private EditText note;
+    private Toolbar toolbar;
+    private static final int PHOTO_SUCCESS = 1;
+    private static final int CAMERA_SUCCESS = 2;
 
 
 
@@ -33,8 +62,13 @@
         setContentView(R.layout.activity_new_task);
         init();
         initTasks();
+        takePhoto();
+        toolbar.setTitle("");
+        setActionBar(toolbar);
+        ActionBar actionBar = getActionBar();
+        actionBar.setDisplayHomeAsUpEnabled(true);
         TaskAdapter adapter = new TaskAdapter(NewTaskActivity.this,R.layout.task_item,subTaskList);
-        ListView listView = (ListView) findViewById(R.id.task_list);
+        ListView listView = (ListView) findViewById(R.id.recycler_view);
 //        listView.setOnClickListener(new AdapterView.OnItemClickListener() {
 //            @Override
 //            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
@@ -42,6 +76,119 @@
 //            }
 //        });
 
+        //点击按钮进入计划进度分配界面
+        planProgress.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                Intent intent = new Intent(NewTaskActivity.this,PlanProgressActivity.class);
+                startActivity(intent);
+            }
+        });
+
+        //确定按钮监听事件
+        //点击后，检查必填项，全部完成，自动保存并返回主界面
+        //未全部完成，弹出按钮提醒框并在空白处用醒目颜色标注
+        confirmButton.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+
+            }
+        });
+        //取消按钮监听事件
+        //点击后，弹出确认框是否保存
+        //是，保存到草稿箱，并返回主界面
+        //否，删除并返回主界面
+        cancelButton.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                AlertDialog.Builder builder = new AlertDialog.Builder(NewTaskActivity.this);
+                builder.setTitle("是否保存");
+                //点击是，保存到草稿箱，并返回主界面
+                builder.setPositiveButton("是", new DialogInterface.OnClickListener() {
+                    @Override
+                    public void onClick(DialogInterface dialog, int which) {
+
+                    }
+                });
+                //点击否，删除并返回主界面
+                builder.setNegativeButton("否", new DialogInterface.OnClickListener() {
+                    @Override
+                    public void onClick(DialogInterface dialog, int which) {
+                        Intent intent1 = new Intent(NewTaskActivity.this,MainActivity.class);
+                        startActivity(intent1);
+                    }
+                });
+                builder.show();
+            }
+        });
+
+        //设置日期
+        setDate();
+        //摄制时间
+        setTime();
+
+
+
+
+    }
+
+    @Override
+    public boolean onCreateOptionsMenu(Menu menu) {
+        getMenuInflater().inflate(R.menu.toolbar,menu);
+        return true;
+    }
+
+    //toolbar上的按钮功能实现
+    @Override
+    public boolean onOptionsItemSelected(@NonNull MenuItem item) {
+        switch (item.getItemId()) {
+            case R.id.set:  //设置提醒键
+                Intent intent=new Intent(NewTaskActivity.this,SetReminderActivity.class);
+                startActivity(intent);
+                break;
+            case android.R.id.home:  //返回键
+                AlertDialog.Builder builder = new AlertDialog.Builder(NewTaskActivity.this);
+                builder.setTitle("是否保存");
+                //点击是，保存到草稿箱，并返回主界面
+                builder.setPositiveButton("是", new DialogInterface.OnClickListener() {
+                    @Override
+                    public void onClick(DialogInterface dialog, int which) {
+
+                    }
+                });
+                //点击否，删除并返回主界面
+                builder.setNegativeButton("否", new DialogInterface.OnClickListener() {
+                    @Override
+                    public void onClick(DialogInterface dialog, int which) {
+                       Intent intent1 = new Intent(NewTaskActivity.this,MainActivity.class);
+                       startActivity(intent1);
+                    }
+                });
+                builder.show();
+            default:
+        }
+        return true;
+    }
+
+    private void init(){
+        addDate = (Button) findViewById(R.id.add_date);
+        addTime = (Button) findViewById(R.id.add_time);
+        addPicture = (Button) findViewById(R.id.add_picture);
+        planProgress = (Button) findViewById(R.id.edit_plan);
+        confirmButton = (Button) findViewById(R.id.confirm_button);
+        cancelButton = (Button) findViewById(R.id.cancel_button);
+        note = (EditText) findViewById(R.id.note);
+        toolbar = (Toolbar) findViewById(R.id.toolbar);
+
+
+
+    }
+
+    private void initTasks() {
+
+    }
+
+    private void setDate() {
         addDate.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
@@ -49,7 +196,6 @@
                 int year = mCalendar.get(Calendar.YEAR);
                 int month = mCalendar.get(Calendar.MONTH);
                 final int day = mCalendar.get(Calendar.DAY_OF_MONTH);
-
                 new DatePickerDialog(NewTaskActivity.this, new DatePickerDialog.OnDateSetListener() {
                     @Override
                     public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
@@ -58,6 +204,9 @@
                 },year,month,day).show();
             }
         });
+    }
+
+    private void setTime() {
         addTime.setOnClickListener(new View.OnClickListener() {
             Calendar calendar = Calendar.getInstance();
             @Override
@@ -73,19 +222,145 @@
 
             }
         });
+    }
 
+    private void takePhoto() {
+        addPicture.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                AlertDialog.Builder builder=new AlertDialog.Builder(NewTaskActivity.this)
+                        .setIcon(R.mipmap.ic_launcher)
+                        .setTitle("选择图片：")
+                        //设置两个item
+                        .setItems(new String[]{"相机","图库"}, new android.content.DialogInterface.OnClickListener(){
 
+                            @Override
+                            public void onClick(DialogInterface dialog, int which) {
+                                switch (which) {
+                                    case 0://拍照
+                                        Intent getImageByCamera= new Intent("android.media.action.IMAGE_CAPTURE");
+                                        startActivityForResult(getImageByCamera, CAMERA_SUCCESS);
+                                       // pickPicFromCam();
+                                        break;
+                                    case 1://从相册中选择
+                                        Intent getImage = new Intent(Intent.ACTION_GET_CONTENT);
+                                        getImage.addCategory(Intent.CATEGORY_OPENABLE);
+                                        getImage.setType("image/*");
+                                        startActivityForResult(getImage, PHOTO_SUCCESS);
+                                       // pickPicFromPic();
+                                        break;
+                                    default:
+                                        break;
+                                }
 
+                            }});
+                builder.create().show();
+            }
+        });
     }
+
+    /*
+    //拍照
+    private void pickPicFromCam() {
+
 
-    private void init(){
-        addDate = (Button) findViewById(R.id.add_date);
-        addTime = (Button) findViewById(R.id.add_time);
+    }
 
+    //从相册中选择
+    private void pickPicFromPic() {
 
     }
 
-    private void initTasks() {
+     */
+
+    @Override
+    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent intent) {
+
+        //插入图片
+        ContentResolver resolver = getContentResolver();
+        if (resultCode == RESULT_OK) {
+            switch (requestCode) {
+                case PHOTO_SUCCESS:
+                    //获得图片的uri
+                    Uri originalUri = intent.getData();
+                    Bitmap bitmap = null;
+                    try {
+                        Bitmap originalBitmap = BitmapFactory.decodeStream(resolver.openInputStream(originalUri));
+                        bitmap = resizeImage(originalBitmap, 200, 200);
+                    } catch (FileNotFoundException e) {
+                        e.printStackTrace();
+                    }
+                    if(bitmap != null){
+                        //根据Bitmap对象创建ImageSpan对象
+                        ImageSpan imageSpan = new ImageSpan(NewTaskActivity.this, bitmap);
+                        //创建一个SpannableString对象，以便插入用ImageSpan对象封装的图像
+                        SpannableString spannableString = new SpannableString("[local]"+1+"[/local]");
+                        //  用ImageSpan对象替换face
+                        spannableString.setSpan(imageSpan, 0, "[local]1[local]".length()+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
+                        //将选择的图片追加到EditText中光标所在位置
+                        int index = note.getSelectionStart(); //获取光标所在位置
+                        Editable edit_text = note.getEditableText();
+                        if(index <0 || index >= edit_text.length()){
+                            edit_text.append(spannableString);
+                        }else{
+                            edit_text.insert(index, spannableString);
+                        }
+                    }else{
+                        Toast.makeText(NewTaskActivity.this, "获取图片失败", Toast.LENGTH_SHORT).show();
+                    }
+                    break;
+                case CAMERA_SUCCESS:
+                    Bundle extras = intent.getExtras();
+                    Bitmap originalBitmap1 = (Bitmap) extras.get("data");
+                    if(originalBitmap1 != null){
+                        bitmap = resizeImage(originalBitmap1, 200, 200);
+                        //根据Bitmap对象创建ImageSpan对象
+                        ImageSpan imageSpan = new ImageSpan(NewTaskActivity.this, bitmap);
+                        //创建一个SpannableString对象，以便插入用ImageSpan对象封装的图像
+                        SpannableString spannableString = new SpannableString("[local]"+1+"[/local]");
+                        //  用ImageSpan对象替换face
+                        spannableString.setSpan(imageSpan, 0, "[local]1[local]".length()+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
+                        //将选择的图片追加到EditText中光标所在位置
+                        int index = note.getSelectionStart(); //获取光标所在位置
+                        Editable edit_text = note.getEditableText();
+                        if(index <0 || index >= edit_text.length()){
+                            edit_text.append(spannableString);
+                        }else{
+                            edit_text.insert(index, spannableString);
+                        }
+                    }else{
+                        Toast.makeText(NewTaskActivity.this, "获取图片失败", Toast.LENGTH_SHORT).show();
+                    }
+                    break;
+                default:
+                    break;
+            }
+        }
+        super.onActivityResult(requestCode, resultCode, intent);
+    }
 
+    //插入图片功能
+    private Bitmap resizeImage(Bitmap originalBitmap, int newWidth, int newHeight){
+        int width = originalBitmap.getWidth();
+        int height = originalBitmap.getHeight();
+        //定义欲转换成的宽、高
+//      int newWidth = 200;
+//      int newHeight = 200;
+        //计算宽、高缩放率
+        float scanleWidth = (float)newWidth/width;
+        float scanleHeight = (float)newHeight/height;
+        //创建操作图片用的matrix对象 Matrix
+        Matrix matrix = new Matrix();
+        // 缩放图片动作
+        matrix.postScale(scanleWidth,scanleHeight);
+        //旋转图片 动作
+        //matrix.postRotate(45);
+        // 创建新的图片Bitmap
+        Bitmap resizedBitmap = Bitmap.createBitmap(originalBitmap,0,0,width,height,matrix,true);
+        return resizedBitmap;
     }
+
+
+
+
 }
\ No newline at end of file
Index: app/src/main/java/com/example/killdll/db/task.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/killdll/db/task.java	(date 1609042030333)
+++ app/src/main/java/com/example/killdll/db/task.java	(date 1609042030333)
@@ -0,0 +1,62 @@
+package com.example.killdll.db;
+
+import org.litepal.crud.LitePalSupport;
+
+public class task extends LitePalSupport {
+    private String theme;
+    private String date;
+    private String time;
+    private String subTask;
+    private String note;
+    private int plan;
+
+    public String getDate() {
+        return date;
+    }
+
+    public void setDate(String date) {
+        this.date = date;
+    }
+
+    public String getNote() {
+        return note;
+    }
+
+    public void setNote(String note) {
+        this.note = note;
+    }
+
+    public int getPlan() {
+        return plan;
+    }
+
+    public void setPlan(int plan) {
+        this.plan = plan;
+    }
+
+    public String getSubTask() {
+        return subTask;
+    }
+
+    public void setSubTask(String subTask) {
+        this.subTask = subTask;
+    }
+
+    public String getTheme() {
+        return theme;
+    }
+
+    public void setTheme(String theme) {
+        this.theme = theme;
+    }
+
+    public String getTime() {
+        return time;
+    }
+
+    public void setTime(String time) {
+        this.time = time;
+    }
+}
+
+
